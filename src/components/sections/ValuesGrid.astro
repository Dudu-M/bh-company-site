---
import { 
  Unlock, 
  Handshake, 
  Leaf, 
  Shield 
} from 'lucide-astro';

interface ValueItem {
  icon: string;
  title: string;
  description?: string;
}

interface Props {
  heading?: string;
  subheading?: string;
  items: ValueItem[];
  background?: 'dark' | 'light';
  class?: string;
}

const { 
  heading,
  subheading,
  items,
  background = 'dark',
  class: className = ''
} = Astro.props;

const bgClass = background === 'dark' ? 'bg-primary-500' : 'bg-neutral-100';
const textClass = background === 'dark' ? 'text-white' : 'text-primary-500';
const cardBg = background === 'dark' ? 'bg-white backdrop-blur-sm' : 'bg-white';
const cardTextClass = background === 'dark' ? 'text-white' : 'text-primary-500';

// Icon mapping
const iconMap = {
  'unlock': Unlock,
  'handshake': Handshake,
  'leaf': Leaf,
  'shield': Shield,
};
---

<section class={`${bgClass} ${className} pt-10 pb-10`}>
  <div class="container-custom">
    
    {(heading || subheading) && (
      <div class="text-center max-w-3xl mx-auto mb-16 slide-up">
        {heading && (
          <h2 class={`${textClass} mb-4`}>
            {heading}
          </h2>
        )}
        {subheading && (
          <p class={`text-xl ${background === 'dark' ? 'text-neutral-100' : 'text-neutral-600'}`}>
            {subheading}
          </p>
        )}
      </div>
    )}

    <div class="grid gap-6 py-2 [grid-template-columns:repeat(auto-fit,minmax(12rem,1fr))]">
      {items.map((item, index) => {
        const Icon = iconMap[item.icon as keyof typeof iconMap];
        return (
          <div 
            class={`${cardBg} rounded-2xl p-6 hover:scale-105 transition-all duration-300 hover:shadow-2xl slide-up w-full`}
            style={`animation-delay: ${index * 0.1}s`}
          >
            <div class="flex flex-col items-left text-left gap-4">
              <!-- Icon (on top) -->
              <div class="w-12 h-12 bg-neutral-100 rounded-4xl flex items-center justify-center">
                <Icon class="w-6 h-6 text-accent-500" />
              </div>

              <!-- Content (centered, can wrap across lines) -->
              <div class="w-full">
                <h4 class={`text-xl md:text-2xl font-semibold ${cardTextClass} mb-2 ${background === 'dark' ? 'text-neutral-200' : 'text-neutral-600'}`}>
                  {item.title}
                </h4>
                {item.description && (
                  <p class={`${background === 'dark' ? 'text-neutral-200' : 'text-neutral-600'}`}>
                    {item.description}
                  </p>
                )}
              </div>
            </div>
          </div>
        );
      })}
    </div>

  </div>
</section>